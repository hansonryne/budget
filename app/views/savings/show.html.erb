<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @saving.name %>
</p>

<p>
  <strong>Date:</strong>
  <%= @saving.save_date %>
</p>

<p>
  <strong>Amount:</strong>
  <%= @saving.amount %>
</p>

<p>
  <strong>Category:</strong>
  <%= @saving.category %>
</p>

<p>
  <strong>Recurring:</strong>
  <%= @saving.recurring %>
</p>

<p>
  <strong>Attached to Budget:</strong>
  <%= @saving.get_attached_budget_name %>
</p>

<p>
  <strong>Attached Months:</strong>
  <% @saving.months.each do |m| %>
    <%= m.name_as_month_year %>
  <% end %>
</p>
<% if @saving.months.length <= 12 %>
<%= form_with(model: @saving, local: true, url: { action: 'add_single_month' }) do |form| %>
  <% if @saving.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@saving.errors.count, "error") %> prohibited this Saving from being saved:</h2>

      <ul>
        <% @saving.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

<div class="field">
  <%= form.label 'Attach to month:' %>
  <%= form.collection_select(:month_ids, Month.where(annual_budget_id: @saving.annual_budget_id), :id, :name_as_month_year) %>
</div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
<% end %>

<% if @saving.months.length < 12 %>
  <p>OR:</p>
  <%= button_to('Add to all months in attached budget', action: 'distribute') %>
<% end %>

<%= link_to 'Show Budget', annual_budget_path(@saving.annual_budget_id) %> |
<%= link_to 'Edit', edit_saving_path(@saving) %> |
<%= link_to 'Clone', clone_saving_path(@saving) %> |
<%= link_to 'Back', savings_path %>
