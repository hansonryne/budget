<table>
  <thead>
  <tr>
    <th>Savings</th>
  </tr>
  </thead>
  <tbody>
  <% if @savings.where(save_date: Date.new(@annual_budget.year, MONTHHASH[this_month], 1)..Date.new(@annual_budget.year, MONTHHASH[this_month], -1)).length == 0 %>
    <tr>
      <td><strong>No Savings This Month</strong></td>
    </tr>
  <% else %>
    <tr>
      <th>Name</th>
      <th>Amount</th>
      <th>Category</th>
      <th>Recurring</th>
      <th>Percentage</th>
      <th colspan="3"></th>
    </tr>
    <% @savings.where(save_date: Date.new(@annual_budget.year, MONTHHASH[this_month], 1)..Date.new(@annual_budget.year, MONTHHASH[this_month], -1)).each do |saving| %>
      <tr>
        <td><%= saving.name %></td>
        <td><%= '%.2f' % saving.amount %></td>
        <td><%= saving.category %></td>
        <td><%= saving.recurring %></td>
        <td><%= ((saving.amount.to_f / @savings.where(save_date: Date.new(@annual_budget.year, MONTHHASH[this_month], 1)..Date.new(@annual_budget.year, MONTHHASH[this_month], -1)).sum(&:amount)) * 100).round %></td>
        <td><%= link_to 'Show', saving %></td>
        <td><%= link_to 'Edit', edit_saving_path(saving) %></td>
        <td><%= link_to 'Destroy', saving, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      </tr>
    <% end %>
    <tr>
      <td>TOTAL:</td>
      <td><%= '%.2f' % @savings.where(save_date: Date.new(@annual_budget.year, MONTHHASH[this_month], 1)..Date.new(@annual_budget.year, MONTHHASH[this_month], -1)).sum(&:amount) %></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
  </tr>
  <% end %>
  </tbody>
  </table>